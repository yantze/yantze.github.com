language: node_js
node_js:
  - 0.1
branches:
  only:
  - source
before_install:
  - npm install -g hexo
install:
  - npm install
before_script:
  - git config --global push.default simple
  - git config --global user.name 'yantze'
  - git config --global user.email 'yantze@126.com'
  - git submodule update --init --recursive
script:
  - hexo generate
  - pwd
  - git status
after_success:
  - "mv public gitdeploy"
  - "cd gitdeploy"
  - "git init"
  - "git remote add origin http://github.com/yantze/yantze.github.com"
  - "echo 'language: node_js' > .travis.yml"
  - "echo 'script' >> .travis.yml"
  - "echo ' - echo hahah' >> .travis.yml"
  - "cp ../themes/cusstom.css css/"
  - echo '<link href="css/custom.css" media="all" rel="stylesheet" />' >> index.html
  - "git add . -A"
  - "ls -al"
  - "git commit -m 'auto generate by travis-ci'"
  - "git branch"
  - "git remote -v"
  - "git push upstream origin/master"
  - "git push master origin"
  - "git push -q"
env:
  global:
  - secure: AAAtOFeBLK4gRGVshxGzxpSeHs1eJ45jcg/kV2Uvyny/ffvw4/r61C1Zslezi2fT1kIbMuEBAD46PZmqXDTNnKqW9NFBQz4WAFyClUQ4YF/l4JmmgGzy3VZKHSk4q6zfm7D7nsffgN+Z94nZz4AE+pv0AD3VJ+U5iIvWoihcjds=
